# https://opensource.com/article/18/3/manage-workstation-ansible
# ansible-pull -e "ansible_become_password=[SUDO_PASSWORD]" -U https://github.com/chathura2031/ansible-test.git
- name: Install packages
  hosts: localhost
  become: true
  tasks:
    - name: Update and upgrade apt packages
      apt:
        upgrade: yes
        update_cache: yes
        cache_valid_time: 86400

    - name: Install udisks2 (provides udisksctl)
      apt:
        name: udisks2
        state: latest

    - name: Install vim (text editor)
      apt:
        name: vim
        state: latest

    - name: Install xorg (display server)
      apt:
        name: xorg
        state: latest

    - name: Install openbox (window manager)
      apt:
        name: openbox
        state: latest

    - name: Install obconf (openbox configuration utility)
      apt:
        name: obconf
        state: latest

    - name: Install tint2 (panel manager)
      apt:
        name: tint2
        state: latest

    - name: Install xcompmgr (compositor)
      apt:
        name: xcompmgr
        state: latest

    - name: Install nitrogen (desktop background browser/setter)
      apt:
        name: nitrogen
        state: latest

    - name: Install libnotify (notification library)
      apt:
        name: dunst
        state: latest

    - name: Install dunst (notification daemon/server)
      apt:
        name: dunst
        state: latest

    - name: Install yakuake (terminal emulator)
      apt:
        name: yakuake
        state: latest

    - name: Install xbacklight (brightness controller)
      apt:
        name: xbacklight
        state: latest

    - name: Install thunar (file manager)
      apt:
        name: thunar
        state: latest

    - name: Install flatpak (cross-distro package manager)
      apt:
        name: flatpak
        state: latest

    - name: Add flathub repository
      community.general.flatpak_remote:
        name: flathub
        state: present
        flatpakrepo_url: https://flathub.org/repo/flathub.flatpakrepo
        method: system

    - name: Install chromium (browser)
      flatpak:
        name: com.github.Eloston.UngoogledChromium
        state: present

- name: Configure packages
  hosts: localhost
  tasks:
    - name: Setup openbox
      become: true
      copy:
        src: ./openbox
        dest: /etc/xdg/

    - name: Setup vim
      become: true
      copy:
        src: ./vimrc
        dest: /etc/vim/

    - name: Setup tint2
      copy:
        src: tint2rc
        dest: ~/.config/tint2/

    - name: Setup yakuake
      copy:
        src: yakuakerc
        dest: ~/.config/
